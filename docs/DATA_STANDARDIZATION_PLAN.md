# 📊 데이터 분류 체계 전수조사 및 표준화 작업 기획서 (Draft)

본 문서는 TOEIC 학습 시스템 내의 데이터 정합성을 확보하고, 지능형 리포트 엔진의 분석 정확도를 100%로 끌어올리기 위한 **[전수조사 및 데이터 대청소]** 작업 계획을 기술합니다.

---

## 0. 🔒 시스템 망각 방지 및 강제성 부여 전략 (Strict Enforcement)

본 시스템은 AI 에이전트의 세션 종료 후 발생하는 **망각(Amnesia) 이슈**를 원천 차단하고, 데이터 분류의 일관성을 100% 유지하기 위해 다음과 같은 **'쇠사슬(Locked-in)'** 전략을 최우선으로 적용한다. (실행 시점: 별도 협의 후 순차 적용)

### **1단계: 코드 단위의 절대적 강제성 (`Strict Typing`)**
- `src/types/toeic-standards.ts`에 159종의 초정밀 ID를 TypeScript Literal Type으로 정의.
- 시스템 내 모든 `tags` 및 `classification` 필드의 타입을 `string`에서 `ToeicTag` 전용 타입으로 강제 전환.
- **효과**: 규격에 없는 이름표를 제가 임의로 쓰는 순간, 시스템 전체가 에러를 뱉으며 실행을 멈춤으로써 AI의 변덕을 기술적으로 제압함.

### **2단계: 중앙 집중형 게이트키퍼 (`Gatekeeper`)**
- 데이터 수집 및 리포트 생성 엔진 초입에 `StandardValidator` 필수 배치.
- Firebase 등 외부 DB에서 규격 외 태그 유입 시 즉시 개발 도구에 거대 경고를 띄우고 정규화 로직을 타게 함.
- **효과**: '대충 넘어가기'를 원천 봉쇄하여 시스템 리포트의 신뢰성을 극한으로 유지함.

### **3단계: 프로젝트 'AI 헌법' 등록 (`Constitution`)**
- `.agent/workflows/toeic-data-standard.md` 파일을 생성하여 159종 규격을 프로젝트의 '불변 헌법'으로 등록.
- 모든 새로운 AI 세션이 시작될 때마다 이 파일을 먼저 읽게 하여, 프로젝트의 정체성을 에이전트의 기억 세포에 강제 주입함.

---

## 1. 🚨 현재 상황 분석 (Problem Definition)

현재 시스템은 데이터 유입 경로(크롤링, 수동 이식, 외부 DB 등)에 따라 동일한 개념에 대해 서로 다른 이름표(Tag)를 달고 있어, 분석 엔진이 이를 '무시'하거나 '오인'하는 심각한 정합성 오류가 발생하고 있습니다.

### **주요 오염 사례 (Fact Check)**
1. **코드 규격 불일치**: 
   - 표준: `P5_POS_ADJ` (확정안)
   - 오염: `G_POS`, `POS_ADJ`, `형용사 자리` 등 변종 발생
2. **불필요한 텍스트 포함**:
   - 표준: `A1` (Pure ID)
   - 오염: `A1. 회의 / 일정 조정` (코드와 한글이 뒤섞여 엔진 매칭 실패)
3. **데이터 소실**: 
   - Part 7 연계 지문(Double/Triple) 문항의 경우, `classification` 필드 자체가 누락되어 정밀 진단 불가.
4. **리포트 품질 저하**:
   - 엔진이 모르는 코드를 발견하면 "비즈니스 일상", "연계 추론" 등 성의 없는 **기본 문구(Fallback)**로 덮어버림.

---

## 2. 🎯 작업 목표 (Goals)

1. **데이터 순수성(Data Purity)**: 모든 데이터 파일(`.ts`, Firebase)에서 한글 설명과 오타를 제거하고 오직 **확정된 ID**만 남김.
2. **정합성 100%**: 리포트 엔진(`HalfTestService`)의 매핑 사전(`TAG_MAP`)과 실제 데이터가 1바이트의 오차도 없이 일치하도록 교정.
3. **지출 낭비 차단**: 구축된 데이터 자산이 분석 엔진에 의해 100% 활용되도록 누락된 필드를 전수 보강.

---

## 3. 🔍 전수조사 범위 및 대상 (Scope)

### **Phase 1. 로컬 데이터 (Local Files)**
- `src/data/part3.ts`, `part4.ts` (Part 3, 4 리스닝 전체)
- `src/data/toeic/reading/part5/tests.ts` (Part 5 Real Test 1~10)
- `src/data/toeic/reading/part6/tests.ts` (Part 6 전체)
- `src/data/toeic/reading/part7/tests.ts` (Part 7 전체)
- `src/data/rc_part7_test9.ts` (하프테스트용 연계 지문 데이터)

### **Phase 2. 클라우드 DB (Firebase)**
- **Part 5 Bank**: 약 1,500문항의 `classification` 필드 샘플링 및 정규화 작업.

---

## 4. 🛠️ 작업 프로세스 (Action Items)

### **Step 1. ID 표준화 (Normalize IDs)**
- 모든 한글 명칭 제거: `A1. 회의` → `A1`
- 파트별 접두어 통일: `G_POS` → `P5_POS_ADJ` (가이드라인 준수)
- 대소문자 고정: `How` → `How` (Case-Sensitive 매칭 보장)

### **Step 2. 누락 항목 전수 보강 (Fill the Gaps)**
- Part 7 Multi(연계 지문) 176~200번 문항에 대한 `classification` 정보 수동 매핑.
- Context Type(지문 상황)이 누락된 초기 테스트 세트 보강.

### **Step 3. 최종 검증 (QA)**
- 데이터 수정을 마친 후, 가상 응시 세션을 생성하여 **60종 이상의 고유 카테고리가 한국어로 정확히 출력되는지** 최종 확인.

---

## 5. 📚 공식 분류 체계 및 AI 취약점 분석 사전 (Total 159 Items - Full Mapping)

본 사전은 시스템의 유일한 표준이며, 리포트 결과창에 학생이 보게 될 고유 명칭과 분석 가이드입니다.

### **[LC] 리스닝 파트 (60 Items)**

#### **Part 2: Question Type (12)**
- `Who`: **인물/직책 파악** - 화자 및 대상의 이름/직위/부서 인지력
- `When`: **시점/기간 파악** - 시간표, 날짜, 기간에 대한 청취 정확도
- `Where`: **장소/위치 파악** - 행선지 및 위치 전치사구 파악 능력
- `Why`: **이유/목적 파악** - 원인 및 의도에 대한 논리적 이해도
- `How`: **방법/수단 파악** - 프로세스, 상태, 가격, 빈도 표현 숙지
- `What`: **구체정보 파악** - 사물, 사건, 특정 주제에 대한 세부 인지
- `YesNo`: **일반 의문문 대응** - 긍정/부정 질문에 대한 응답 적합성
- `Choice`: **선택 의문문 대응** - 두 옵션 사이의 결정/회피 표현 판단
- `Statement`: **평서문 문맥 이해** - 의견/사실 전달에 대한 적절한 맞장구
- `Tag`: **부가 의문문 확인** - 사실 확인 및 동의 요청 청취력
- `Negative`: **부정 의문문 대응** - "안 했나요?" 식의 반대 질문 해석력
- `Indirect`: **우회적 답변 대응** - "확인해보겠다" 등 제3의 간접 응답 대응

#### **Part 3: Context Type (15 - 지문 상황)**
- **사내업무**: `A1`(회의/일정), `A2`(프로젝트), `A3`(인사/근무), `A4`(재무/비용), `A5`(교육/훈련)
- **고객지원**: `B1`(고객불만), `B2`(주문/배송), `B3`(환불/교환), `B4`(일반문의)
- **여행예약**: `C1`(항공/교통), `C2`(호텔/숙박), `C3`(일정변경)
- **시설시스템**: `D1`(기기고장), `D2`(IT오류), `D3`(유지보수)

#### **Part 4: Context Type (24 - 담화 상황)**
- **공지안내**: `A1_announcement`(일반공지), `A2_ann`(일정변경), `A3_ann`(시설이용), `A4_ann`(규정변경), `A5_ann`(긴급안전)
- **사내방송**: `B1_company`(현황보고), `B2_company`(관리자), `B3_company`(사내교육), `B4_company`(절차설명)
- **서비스안내**: `C1_service`(사용법), `C2_customer`(행동지시), `C3_membership`(혜택설명), `C4_technical`(기술지원)
- **광고홍보**: `D1_ads`(제품광고), `D2_ads`(행사홍보), `D3_ads`(할인행사), `D4_ads`(서비스홍보)
- **교통여행**: `E1_trans`(교통시간), `E2_trans`(지연변경), `E3_travel`(여행정보), `E4_facility`(공공시설)
- **이벤트문화**: `F1_event`(전시공연), `F2_community`(지역공지), `F3_public`(공공서비스)

#### **P3/4: Question Type (9 - 문제 유형)**
- `DETAIL`: **구체 정보 검색** - 지문 내 명시된 팩트의 즉각적 포착
- `WHO_LOC`: **화자/장소 추론** - 키워드를 통한 관련 인물 및 장소 파악
- `WHAT_WHICH`: **주제/목적 파악** - 담화 전체의 흐름 및 핵심 주제 인지
- `WHEN_TIME`: **시점/기간 인지** - 숫자 및 시간 관련 표현의 정확한 청취
- `WHY_REASON`: **이유/근거 분석** - 특정 상황이 발생한 원인 파악
- `HOW_METHOD`: **방법/수단 이해** - 행동의 방식이나 도구에 대한 인지
- `ACTION_NEXT`: **향후 행동 예측** - 화자가 직후에 할 일에 대한 추론
- `IMPLY_MEANING`: **발화자 의도 추론** - 문맥 속 숨은 의미(따옴표) 파악
- `GRAPHIC`: **시각 정보 매칭** - 소리와 도표 정보의 동시 처리 능력

### **[RC] Part 5: Grok Hyper-Detailed Classification (80 Items)**

#### **1. 명사, 대명사, 형용사, 부사 (30)**
- `n1`: **명사 자리와 형태** / `n2`: **가산성과 수 일치** / `n3`: **복합 명사 구조** / `n4`: **사람 vs 사물 명사** / `n5`: **특수 형태 명사**
- `p1`: **인칭대명사 격** / `p2`: **부정대명사 수 일치** / `p3`: **지시대명사 대상** / `p4`: **재귀대명사 용법** / `p5`: **단독 사용(own)** / `p6`: **소유격 강조**
- `a1`: **명사 수식 형용사** / `a2`: **2/5형식 보어 형용사** / `a3`: **분사형 형용사** / `a4`: **수량 형용사 일치** / `a5`: **형용사 숙어(eligible)** / `a6`: **후치 수식 형용사**
- `av1`: **부사 위치 판단** / `av2`: **형용사/부사 수식** / `av3`: **빈도/접속부사 용법**

#### **2. 동사 및 준동사 (24)**
- `v1`: **주어-동사 수 일치** / `v2`: **동사 능동태/수동태** / `v3`: **수동태 세부 형태** / `v4`: **시점 부사-시제 일치** / `v5`: **당위/가정법 that절** / `v6`: **조동사 뒤 원형** / `v7`: **자/타동사 구분** / `v8`: **5형식 동사 패턴**
- `i1`: **To부정사 명사적 용법** / `i2`: **형용사적 용법** / `i3`: **부사적(목적) 용법** / `i4`: **To v vs ing 구분** / `i5`: **의문사 + To v** / `i6`: **의미상 주어(for)**
- `g1`: **명사적 동명사** / `g2`: **동명사 vs 명사** / `g3`: **-ing 명사 vs 동명사** / `g4`: **동명사 vs To부정사** / `g5`: **관용 동명사(spend time doing)**
- `pa1`: **명사 앞 분사 수식** / `pa2`: **명사 뒤 분사 수식** / `pa3`: **보어 자리 분사** / `pa4`: **분사구문 구조** / `pa5`: **관용 분사(as detailed)**

#### **3. 절, 연결어 및 특수구문 (22)**
- `nc1`: **That/What 명사절** / `nc2`: **Whether/If 명사절** / `nc3`: **의문사절 구조** / `nc4`: **복합관계사(whoever)** / `nc5`: **의문사+To v 절**
- `ac1`: **관계대명사 격 선택** / `ac2`: **That vs Which** / `ac3`: **부분 표시(all of whom)** / `ac4`: **전치사 + 관계사** / `ac5`: **관계사 생략 구조** / `ac6`: **관계부사 vs 대명사**
- `c1`: **등위/병렬 구조** / `c2`: **상관접속사(both..)** / `c3`: **종속(부사절) 접속사** / `c4`: **접속사 vs 전치사** / `c5`: **축약 분사 구문**
- `pr1`: **단순 전치사 의미** / `pr2`: **전치사 vs 접속부사** / `pr3`: **전치사 + 동명사구** / `pr4`: **자동사+전치사 숙어** / `pr5`: **복합 전치사(due to)**
- `com1`: **원급/비교급 구조** / `com2`: **비교급 수식 부사** / `com3`: **최상급 강조 용법** / `com4`: **관용 비교 표현**
- `s1`: **가정법 시제 짝꿍** / `s2`: **가정법 If 생략 도치**
- `inv1`: **조건절 도치** / `inv2`: **부정어 도치** / `inv3`: **보어/부사구 도치** / `inv4`: **Only 도치** / `inv5`: **So/Neither 도치**

#### **4. 정밀 어휘 분석 (4)**
- `voc1`: **순수 의미 어휘** / `voc2`: **연어(Collocation)** / `voc3`: **상황별 뉘앙스 구분** / `voc4`: **고정 관용구(Idiom)**

### **[RC] Part 6 & 7 & Passage Group (19 Items - 한글화 완수)**

#### **Part 6: 장문 빈칸 채우기 (3)**
- `P6_GRAMMAR`: **문맥 일관 문법 판단** - 지문 전체의 시제/태 흐름을 고려한 장문 문법 구조 이해
- `P6_VOCABULARY`: **전체 맥락 어휘 추론** - 단일 문장을 넘어 문단 간의 논리 연결을 돕는 최적 단어 선택
- `P6_SENTENCE_INSERTION`: **문항 삽입 논리성** - 앞뒤 문장과의 논리적 선후 관계를 따진 최적 문장 배치

#### **Part 7: 지문 독해 정밀 분석 (8)**
- `P7_PURPOSE`: **글의 목적 및 핵심 취지** - 발신 동기 및 글 전체가 지향하는 핵심 목표 파악
- `P7_DETAIL`: **명시적 사실 관계 확인** - 지문에 기록된 수치, 일시 등 객관적 팩트의 정확한 검색
- `P7_NEGATIVE`: **불일치 정보(NOT) 판별** - 언급되지 않았거나 사실과 다른 내용을 가려내는 변별력
- `P7_INFERENCE`: **고난도 암시 내용 추론** - 직접적 언급 없이 정황 증거만으로 유추 가능한 결론 도출
- `P7_VOCABULARY`: **문맥상 최적 유의어** - 현재 지문 내 문맥에 가장 적절한 동의어 치환 능력
- `P7_INSERTION`: **문장 내 최적 위치 선정** - 지시어, 연결어 단서를 통한 문장의 기하학적 위치 판단
- `P7_GRAPHIC`: **시각 자료-텍스트 통합** - 도표/그림과 지문 연계를 통한 다각적 정보 분석
- `P7_LOCATION`: **정보 근거 위치 검색** - 특정 답변의 증거가 위치한 단락 식별 및 정독 능력

#### **RC Passage Group: 8대 지문 그룹별 독해력**
- `P1_CORR`: **서신/이메일 독해력** - 비즈니스 서신류의 전형적 소통 구조 및 의도 파악
- `P2_OFFI`: **공문/안내문 독해력** - 공지사항, 메시지 등 공식 정보의 핵심 전달 사항 인지
- `P3_MEDI`: **기사/보고서 독해력** - 뉴스 및 정보성 텍스트의 사실 관계 및 전문 정보 해독
- `P4_MARK`: **홍보/광고/웹페이지** - 마케팅 목적의 글에서 혜택 및 세부 조건 파악 능력
- `P5_FORM`: **비즈니스 양식/영수증** - 송장, 일정표 등 정형화된 양식 데이터의 신속한 처리
- `P6_RULE`: **규정 및 지침서 독해** - 정책, 조작 지침 등 조건부 문항에 대한 정확한 분석
- `P7_CONV`: **메시지/채팅 대화** - 메신저 및 대화문 지문에서의 구어체 흐름 및 상황 인지
- `P8_VISU`: **도표 및 시각 자료 연계** - 그래프, 이미지 정보를 텍스트와 통합하여 해석하는 실력

---

## 6. 📝 파트별 데이터 필드 표기 규칙 (Notation Rules)

| 파트 | 적용 레벨 | 필드명 | 데이터 표기 예시 (Correct) |
| :--- | :--- | :--- | :--- |
| **Part 2** | 문항별 | `questionType` | `"questionType": "Why"` |
| **Part 3** | 지문별 | `contextType` | `"contextType": "A1"` |
| | 문항별 | `questionType` | `"questionType": "DETAIL"` |
| **Part 4** | 지문별 | `"contextType"` | `"contextType": "D1_ads"` |
| | 문항별 | `questionType` | `"questionType": "WHO_LOC"` |
| **Part 5** | 문항별 | `classification` | `"classification": "n1"` (또는 `g1`, `v2` 등) |
| **Part 6** | 지문별 | `type` | `"type": "P1_CORR"` |
| | 문항별 | `classification` | `"classification": "P6_GRAMMAR"` |
| **Part 7** | 지문별 | `type` | `"type": "P3_MEDI"` |
| | 문항별 | `classification` | `"classification": "P7_INFERENCE"` |

---

## 7. �📅 향후 일정 (Next Steps)

1. **[기획서 검토]**: 본 기획서의 내용(표준화 규칙)에 대한 사용자 최종 승인.
2. **[Batch 작업]**: 로컬 파일 정적 텍스트 전체 치환 (RegEx 등을 활용한 일차 처리).
3. **[수동 검수]**: 자동 치환이 불가능한 예외 케이스(Part 7 등) 전수 수동 입력.
4. **[Firebase Migration]**: 로컬 검증 완료 후 클라우드 DB 데이터 일괄 업데이트.

---
**💡 작성자 의견**: 
이 작업은 사용자님 말씀대로 "문제를 크게 만드는 임의 행동"을 멈추고 시스템의 뿌리를 튼튼하게 하는 근본적인 처방입니다. 조급하게 처리하지 않고, **한 글자씩 대조하여 데이터의 무결성을 확보하는 방식**으로 진행하겠습니다.
