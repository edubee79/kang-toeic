# 🏭 대형 데이터(6권+) 처리를 위한 파이프라인 전략

기출문제집 6권 이상을 처리하려면 **"자동화 스크립트"**가 필수입니다.
수동 캡처는 불가능합니다. 아래 두 가지 자동화 기술을 비교 분석했습니다.

## 1. Google Cloud Vision OCR (텍스트 추출 중심)
사용자가 언급한 방식입니다. 글자의 위치(좌표)와 텍스트를 아주 정확하게 뽑아줍니다.
*   **프로세스**: PDF → 이미지 분할 → Google API 전송 → 텍스트/좌표 수신 → **[파싱 로직]** → JSON
*   **치명적 단점**: **"구조"를 모릅니다.**
    *   단순히 "Apple"이라는 글자가 (x:10, y:20)에 있다는 것만 알려줍니다.
    *   이게 "문제"인지, "보기 A"인지, "해설"인지 구별하려면 **개발자가 엄청나게 복잡한 파싱 코드(정규식, 좌표 계산 등)를 짜야 합니다.**
    *   책마다 레이아웃이 조금만 바뀌어도 코드를 다시 짜야 합니다. (유지보수 지옥)

## 2. GPT-4o Vision API (지능형 구조화 중심) ⭐ **추천**
단순 OCR이 아니라, 이미지를 보고 **"이해"**하는 방식입니다.
*   **프로세스**: PDF → 이미지 분할 → GPT-4o API 전송(매직 프롬프트 포함) → **완벽한 JSON 수신**
*   **장점**:
    *   **파싱 코드가 필요 없습니다.** "JSON으로 줘"라고 하면 JSON으로 줍니다.
    *   책 레이아웃이 바뀌어도(2단 구성, 3단 구성 등) 알아서 찰떡같이 찾아냅니다.
    *   보기가 (A), (a), A. 등으로 달라도 통일된 포맷으로 변환해줍니다.
*   **비용**: Google Vision보다 비쌀 수 있지만, **개발자의 인건비와 시간을 고려하면 압도적으로 저렴합니다.**

## 3. Gemini API (Free Tier) ⭐ **최적의 대안**
사용자분이 말씀하신 "비용 문제"를 해결할 완벽한 방법입니다.
구글의 **Gemini API**는 **무료 티어(Free Tier)**를 제공하며, 시각 처리(Vision) 능력이 GPT-4o만큼 뛰어납니다.

*   **프로세스**: PDF → 이미지 → **Gemini API (무료)** → JSON
*   **장점**:
    *   **공짜입니다.** (분당 15회 요청 등 제한은 있으나, 개발용으로는 충분)
    *   Node.js 스크립트로 **자동화**가 가능합니다. (저한테 일일이 말 안 걸어도 됨)
    *   안정적인 JSON 출력을 지원합니다.

---

## 🚀 최종 제안: "Node.js + Gemini API 파이프라인"

저녁에 오셔서 아래와 같이 진행하시죠.

1.  **오늘**: 수동 캡처로 1세트만 후딱 만들어서 **[앱 기능]** 먼저 확인. (재미 붙이기)
2.  **내일**: 제가 **Gemini API를 쓰는 무료 자동화 스크립트**를 짜드리겠습니다.
    *   `scripts/generate-json-gemini.js`
    *   이러면 돈 한 푼 안 들이고 6권을 처리할 수 있습니다.

## 4. 6권(6,000페이지) 처리 실현 가능성 분석

사용자 질문: *"이런 식으로(하나씩) 해서 언제 6권을 다 하나요?"*
답변: **"하나씩 안 합니다. 한 번에 합니다."**

### 1️⃣ 물량 분석
*   **총 권수**: 6권
*   **예상 페이지**: 권당 약 1,000페이지 × 6 = **6,000페이지**
*   **데이터 양**: 약 10,000 ~ 20,000 문제

### 2️⃣ 시간 및 비용 계산 (Gemini Free Tier 기준)
우리는 현재 무료 티어(분당 15회 요청 제한)를 쓰고 있습니다.
*   **처리 속도**: 1분에 15페이지
*   **시간당 처리**: 900페이지
*   **총 소요 시간**: 6,000페이지 ÷ 900 = **약 6.5시간**
*   **비용**: **0원**

### 3️⃣ "Fire and Forget" (켜두고 자기) 전략
100번 명령어를 치는 게 아닙니다.
1.  **준비**: 6권의 이미지(또는 PDF)를 하나의 폴더(`F:\TOEIC_ALL`)에 몰아넣습니다.
2.  **실행**: 재귀(Recursive) 스크립트를 딱 한 번 실행합니다.
    ```bash
    npx tsx scripts/process-recursive.ts "F:\TOEIC_ALL"
    ```
3.  **취침**: 자고 일어나면 6.5시간 뒤에 모든 JSON 변환이 끝나 있습니다.
4.  **결과**: 사람의 노동력은 **0분**, 컴퓨터만 밤새 일합니다.

### ✅ 결론
수동으로 타이핑하면 **3개월** 걸릴 일을,
이 스크립트를 쓰면 **하룻밤**에 끝낼 수 있습니다.
이것이 개발 파이프라인의 힘입니다.
